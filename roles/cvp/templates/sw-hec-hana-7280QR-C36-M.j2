{% import "templates/libs.j2" as funcs with context %}
{% set p_data={'start': 1, 'end': 9} %}
{% set p_mlag={'start': 29, 'end': 30} %}

interface Ethernet 1/1,1/2,1/3,1/4,2/1,2/2,2/3,2/4,3/1,3/2,3/3,3/4,4/1,4/2,4/3,4/4,5/1,5/2,5/3,5/4,6/1,6/2,6/3,6/4,7/1,7/2,7/3,7/4,8/1,8/2,8/3,8/4,9/1,9/2,9/3,9/4
   speed forced 10000full
   switchport trunk native vlan 40
   switchport trunk allowed vlan 5,40
   switchport mode trunk
   ip access-group HEC{{ hec.hec_nr }}-L2-HANA in
   spanning-tree portfast
!
! === MLAG Peer Link: ===
interface Ethernet{{ p_mlag['start'] }}/1,{{ p_mlag['end'] }}/1
   mtu {{hec.fabric.interlink_mtu}}
   speed forced {{hec.fabric.interlink_speed}}
   channel-group 42 mode active
!
{{ funcs.leaf_uplinks("7280QR-C36-M")}}
!
{% for main_intf in range(p_data['start'], p_data['end']+1) %}
interface Ethernet {{ main_intf }}/1-2
   channel-group {{ main_intf + 100 + loop.index0 }} mode active
!
interface Ethernet {{ main_intf }}/3-4
   channel-group {{ main_intf + 101 + loop.index0 }} mode active
!
{% endfor %}
!
interface Ethernet28/1
   description ->sw-hec{{ hec.hec_nr }}-ipmi-xx
   speed forced 10000full
   switchport mode trunk
   channel-group 900 mode active
